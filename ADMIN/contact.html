<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quản trị viên Hibel - Liên hệ</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      min-height: 100vh;
      display: flex;
      background: #f8f9fa;
    }
    #sidebar {
      width: 240px;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #343a40;
      padding-top: 56px;
      overflow-y: auto;
    }
    #sidebar .nav-link {
      color: #adb5bd;
      font-weight: 600;
    }
    #sidebar .nav-link.active, #sidebar .nav-link:hover {
      background-color: #495057;
      color: #fff;
      border-radius: 0.375rem;
    }
    main {
      margin-left: 240px;
      padding: 2rem;
      width: 100%;
    }
    @media (max-width: 767.98px) {
      #sidebar {
        position: fixed;
        width: 100%;
        height: auto;
        z-index: 1030;
        padding-top: 0;
      }
      main {
        margin-left: 0;
        padding-top: 70px;
      }
    }
    .btn-mail {
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-dark fixed-top d-md-none">
    <div class="container-fluid">
      <button class="btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar" aria-label="Chuyển đổi sidebar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand ms-2" href="#">Quản trị viên Hibtel</a>
    </div>
  </nav>

  <!-- Sidebar -->
   <div id="sidebar" class="d-none d-md-block">
    <div class="p-3 text-white fs-5 fw-bold">Hibtel Admin</div>
    <nav class="nav flex-column px-2">
      <a class="nav-link " href="dashboard.html"><i class="bi bi-speedometer2 me-2"></i> Trang chủ</a>
      <a class="nav-link" href="profit_report.html"><i class="bi bi-bar-chart-line-fill me-2"></i> Báo cáo lợi nhuận </a>
      <a class="nav-link" href="order.html"><i class="bi bi-cart-fill me-2"></i>Phòng đặt</a>
      <a class="nav-link" href="room.html"><i class="bi bi-door-closed-fill me-2"></i> Quản lý phòng</a>
      <a class="nav-link active" href="contact.html"><i class="bi bi-envelope-fill me-2"></i> Liên hệ</a>
      <a class="nav-link" href="profile.html"><i class="bi bi-person-circle me-2"></i> Hồ sơ </a>
      <a class="nav-link" href="acccount.html"><i class="bi bi-people-fill me-2"></i> Tài khoản </a>
      
    </nav>
  </div>

  <!-- Offcanvas Sidebar for small screens -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel">
    <div class="offcanvas-header bg-dark text-white">
      <h5 class="offcanvas-title" id="offcanvasSidebarLabel">HIbtel Admin</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
      <nav class="nav flex-column">
        <a class="nav-link  px-3 py-2" href="dashboard.html"><i class="bi bi-speedometer2 me-2"></i> Trang chủ</a>
        <a class="nav-link px-3 py-2" href="profit_report.html"><i class="bi bi-bar-chart-line-fill me-2"></i> Báo cáo lợi nhuận </a>
        <a class="nav-link px-3 py-2" href="order.html"><i class="bi bi-cart-fill me-2"></i> Phòng đặt</a>
        <a class="nav-link px-3 py-2" href="room.html"><i class="bi bi-door-closed-fill me-2"></i> Quản lý phòng</a>
        <a class="nav-link active px-3 py-2" href="contact.html"><i class="bi bi-envelope-fill me-2"></i> Liên hệ</a>
        <a class="nav-link px-3 py-2" href="profile.html"><i class="bi bi-person-circle me-2"></i> Hồ sơ</a>
        <a class="nav-link px-3 py-2" href="acccount.html"><i class="bi bi-people-fill me-2"></i> Tài khoản </a>
        
      </nav>
    </div>
  </div>
<main>
    <h1 class="mb-4">Tin nhắn liên hệ</h1>
    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle" id="messagesTable">
            <thead class="table-dark">
                <tr>
                    <th>Tên</th>
                    <th>Email</th>
                    <th>Tin nhắn</th>
                    <th>Ngày</th>
                    <th>Phản hồi</th>
                </tr>
            </thead>
            <tbody>
                <!-- Nội dung sẽ được thêm vào đây bằng JavaScript -->
            </tbody>
        </table>
    </div>
</main>
  <!-- Reply Modal -->
  <div class="modal fade" id="replyModal" tabindex="-1" aria-labelledby="replyModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content" id="replyForm" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="replyModalLabel">Phản hồi tin nhắn</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="replyToEmail" class="form-label">Đến</label>
            <input type="email" class="form-control" id="replyToEmail" readonly />
          </div>
          <div class="mb-3">
            <label for="replySubject" class="form-label">Chủ đề</label>
            <input type="text" class="form-control" id="replySubject" readonly />
          </div>
          <div class="mb-3">
            <label for="replyMessage" class="form-label">Tin nhắn</label>
            <textarea class="form-control" id="replyMessage" rows="5" required></textarea>
            <div class="invalid-feedback">Vui lòng nhập tin nhắn phản hồi của bạn.</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
          <button type="submit" class="btn btn-primary">Gửi phản hồi</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const replyModal = document.getElementById('replyModal');
    const replyForm = document.getElementById('replyForm');
    const replyToEmail = document.getElementById('replyToEmail');
    const replySubject = document.getElementById('replySubject');
    const replyMessage = document.getElementById('replyMessage');

    replyModal.addEventListener('show.bs.modal', event => {
      const button = event.relatedTarget;
      const email = button.getAttribute('data-email');
      const name = button.getAttribute('data-name');
      const subject = button.getAttribute('data-subject');

      replyToEmail.value = email;
      replySubject.value = subject;
      replyMessage.value = `Kính gửi ${name},\n\n`;
      replyMessage.classList.remove('is-invalid');
    });

    replyForm.addEventListener('submit', event => {
      event.preventDefault();
      event.stopPropagation();

      if (!replyMessage.value.trim()) {
        replyMessage.classList.add('is-invalid');
        return;
      } else {
        replyMessage.classList.remove('is-invalid');
      }

      // Giả lập việc gửi...
      alert(`Tin nhắn đã được gửi đến ${replyToEmail.value}:\n\n${replyMessage.value}`);
      const modal = bootstrap.Modal.getInstance(replyModal);
      modal.hide();
    });

     const names = ['Đặng Đình kiên ', 'Lê Thị Hòa', 'Lê Quốc Huy', 'Nguyễn Văn Quân ', 'Vũ Cao Khoa',"Bạch Thị Thanh Hà", " Trần Thị Linh"];
    const emails = ['john@example.com', 'jane@example.com', 'bob@example.com', 'alice@example.com', 'charlie@example.com'];
    const messages = [
    'Bạn có thể cho tôi biết giá phòng vào cuối tuần không?',
    'Có phòng nào dành cho gia đình không?',
    'Khách sạn có dịch vụ đưa đón sân bay không?',
    'Thời gian nhận phòng và trả phòng là khi nào?',
    'Có thể đặt phòng trước bao lâu?',
    'Khách sạn có cho phép mang thú cưng không?',
    'Có bữa sáng miễn phí không?',
    'Có dịch vụ giặt ủi tại khách sạn không?',
    'Có thể thay đổi hoặc hủy đặt phòng không?',
    'Có chương trình khuyến mãi nào hiện tại không?'
];

    const tbody = document.querySelector('#messagesTable tbody');

    // Tạo 5 tin nhắn ngẫu nhiên
    for (let i = 0; i < 10; i++) {
        const name = names[Math.floor(Math.random() * names.length)];
        const email = emails[Math.floor(Math.random() * emails.length)];
        const message = messages[Math.floor(Math.random() * messages.length)];
        const date = new Date(Date.now() - Math.floor(Math.random() * 10000000000)).toLocaleDateString();

        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${name}</td>
            <td>${email}</td>
            <td>${message}</td>
            <td>${date}</td>
            <td>
                <button type="button" class="btn btn-sm btn-outline-primary btn-mail" data-bs-toggle="modal" data-bs-target="#replyModal" data-email="${email}" data-name="${name}" data-subject="Re: ${message}">
                    <i class="bi bi-reply-fill"></i> Phản hồi
                </button>
            </td>
        `;
        tbody.appendChild(row);
    }
  </script>
</body>
</html>